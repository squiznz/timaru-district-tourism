function debounce(e,i,t){var s;return function(){var n=this,r=arguments,o=function(){s=null,t||e.apply(n,r)},l=t&&!s;clearTimeout(s),s=setTimeout(o,i),l&&e.apply(n,r)}}function detectScrolling(){function e(){return"undefined"==typeof window.requestAnimationFrame?void i():(n||window.requestAnimationFrame(i),void(n=!0))}function i(){s=$(window).scrollTop(),n=!1,s>=10?$("html").addClass("moving"):$("html").removeClass("moving"),s>=t?$("html").addClass("scrolling"):$("html").removeClass("scrolling")}var t=90,s=0,n=!1;i(),$(window).on("scroll",function(){e()})}function globalActions(){0==$(".pagination a").length&&$(".pagination").hide(),$(".tags-list").each(function(){if(""!==$(".tags-list").text){var e=$(this),t=e.text().trim().split(",");for(e.empty(),i=0;i<t.length;i++){var s='<li class="'+t[i]+'"><span>'+t[i]+"</span></li>";e.append(s)}}}),$(".utility-nav__item--primary-toggle a").click(function(e){e.preventDefault(),$(".primary-nav").toggle().toggleClass("open"),$(".utility-nav__item--primary-toggle").toggleClass("close")}),$(".banner").each(function(){var e=$(this).data("img");$(this).hasClass("feature-banner--home")?$(this).css("background",'linear-gradient(rgba(72, 33, 192, 0.84), rgba(72, 33, 192, 0.84)) repeat scroll 0 0%, rgba(0, 0, 0, 0) url("'+e+'") repeat scroll 0 0'):$(this).hasClass("listing-itineraries__header")||$(this).hasClass("itinerary-details__header")?$(this).css("background",'linear-gradient(rgba(0, 28, 66, 0.6), rgba(0, 28, 66, 0.6)) repeat scroll 0 0%, rgba(0, 0, 0, 0) url("'+e+'") repeat scroll 0 0'):$(this).css("background-image","url("+e+")")}),$(".three-best").find("select").change(function(){threeBest()}),$(".our-region").find("select").change(function(){ourRegion()}),$(".in-this-section h2").click(function(e){e.preventDefault(),$(this).next("ul").toggle()}),0!==$(".our-region").length&&$.get("../assets/nested-content-assets/content-templates/our-region/our-region-search?id="+ourRegionRoot[0],function(e){$(".our-region__wrap").html(e),ourRegionSlider()}),0!==$(".three-best").length&&$.get("../assets/nested-content-assets/content-templates/three-best/three-best-search?id="+threeBestRoot[0],function(e){$(".three-best__wrap").html(e),threeBestSlider()})}function ourRegionSlider(){$(".our-region__list").slick({dots:!0,infinite:!0,autoplay:!1,slidesToShow:1,slidesToScroll:1,mobileFirst:!0,centerMode:!0,centerPadding:"8.6%",draggable:!1,appendArrows:$(".slick-center .slider-tools"),appendDots:$(".slick-center .slider-dots"),responsive:[{breakpoint:480,settings:{centerPadding:"24.3%"}},{breakpoint:768,settings:{centerPadding:"32%"}},{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:1,infinite:!0,dots:!0}}]})}function threeBest(){var e=$(".three-best").find("select").val();$.get("../assets/nested-content-assets/content-templates/three-best/three-best-search?id="+e,function(e){$(".three-best__wrap").html(e),threeBestSlider()})}function ourRegion(){var e=$(".our-region").find("select").val();$.get("./assets/nested-content-assets/content-templates/our-region/our-region-search?id="+e,function(e){$(".our-region__wrap").html(e),ourRegionSlider()})}function threeBestSlider(){$(".slick-three-best").slick({dots:!0,infinite:!0,autoplay:!1,slidesToShow:1,slidesToScroll:1,mobileFirst:!0,centerMode:!0,centerPadding:"8.7%",draggable:!1,responsive:[{breakpoint:1024,settings:"unslick"},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]});var e=$(".slick-three-best");$(window).width()<1023?(e.hasClass("slick-initialized")&&e.slick("unslick"),e.slick({dots:!0,centerMode:!0,infinite:!0,speed:300,arrows:!1,slidesToShow:1,variableWidth:!0})):e.hasClass("slick-initialized")&&e.slick("unslick")}function searchForm(){$(".utility-nav__item--search-toggle a").click(function(e){e.preventDefault(),e.stopPropagation(),$(".site-search").addClass("open"),$("body").click(function(){$(".site-search").removeClass("open")})}),$(".site-search input[type=search]").focus(function(){$(this).parent("fieldset").parent("form").parent(".site-search").addClass("site-search--expanded")}),$(".site-search input[type=search]").focusout(function(){$(this).parent("fieldset").parent("form").parent(".site-search").blur().removeClass("site-search--expanded")})}function megaMenu(){if($(window).width()>1023){var e=$(".primary-nav ul li");$(".primary-nav__first-level > li > a").click(function(e){e.preventDefault(),e.stopPropagation(),$(this).parent("li").toggleClass("active").siblings().removeClass("active")}),$("body").click(function(){e.each(function(){$(this).removeClass("active")})})}else $(".primary-nav__first-level > li > a").unbind("click"),$(".primary-nav__first-level > li > a").click(function(){return!0})}function threeBestSlider(){var e=$(".slick-three-best");$(window).width()<1023?(e.hasClass("slick-initialized")&&e.slick("unslick"),e.slick({dots:!0,centerMode:!0,infinite:!0,speed:300,arrows:!1,slidesToShow:1,variableWidth:!0})):e.hasClass("slick-initialized")&&e.slick("unslick")}$(document).ready(function(){$(".slick").slick({dots:!0,infinite:!0,mobileFirst:!0,slidesToScroll:1,slidesToShow:1}),$(".slick-watch-timaru").slick({dots:!0,infinite:!0,mobileFirst:!0,slidesToScroll:1,fade:!0,slidesToShow:1,slidesToScroll:1,centerMode:!1,responsive:[{breakpoint:768,settings:"unslick"}]}),$(".whats-on-slider ul").slick({dots:!0,infinite:!0,autoplay:!1,mobileFirst:!0,draggable:!1,variableWidth:!0,centerMode:!1,initialSlide:1,appendArrows:$(".whats-on-slider .slider-tools"),appendDots:$(".whats-on-slider .slider-dots"),responsive:[{breakpoint:0,settings:"unslick"},{breakpoint:768,settings:{centerMode:!0,initialSlide:1}}]}),detectScrolling(),globalActions(),threeBest(),megaMenu(),searchForm(),AOS.init({duration:1200}),$(window).on("resize",debounce(function(){threeBestSlider(),console.log($(window).width()),megaMenu()},50))});
